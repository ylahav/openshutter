import{c as be,l as we,a as r,t as X,b as ge,f as x,d as Xe}from"../chunks/mVdtGE8-.js";import{i as ke}from"../chunks/DfpQQ0Vj.js";import{O as ea,Z as aa,p as Le,l as ie,q as E,m as ee,k as e,w as L,g as ta,c as i,j as m,f as g,r as s,v as k,u as y,a as Se,h as W,B as ze,C as Oe,y as ra,F as c,t as sa,n as oa,o as ia}from"../chunks/CK0-DIe0.js";import{a as p,e as xe}from"../chunks/Bv0kf0zg.js";import{v as _e}from"../chunks/DTEFG1b5.js";import{a as he,s as Ge}from"../chunks/BKTEqjJl.js";import{s as Ce,l as na}from"../chunks/BSTdbr_g.js";import{p as Be}from"../chunks/BBQ4KvbY.js";import{s as ye,a as va}from"../chunks/74aT5YJ6.js";import{b as De,l as la,a as ca}from"../chunks/DtlIlvpb.js";import{s as $}from"../chunks/Bwj96XKz.js";import{i as b}from"../chunks/BhPWbYAn.js";import{g as Ee,d as qe}from"../chunks/sJkrieu8.js";import{S as Re,c as He,s as fa,M as da}from"../chunks/DD5UVB3K.js";import{e as ma,i as pa}from"../chunks/jNwdByo0.js";import{s as ne}from"../chunks/Bgqm-9EX.js";import{p as ue}from"../chunks/ux2VXDBy.js";function ua(C,w,T,N,u){ea&&aa();var t=w.$$slots?.[T],f=!1;t===!0&&(t=w.children,f=!0),t===void 0||t(C,f?()=>N:N)}n[c]="src/lib/components/LanguageSelector.svelte";var ga=p(x('<span class="text-lg"> </span>'),n[c],[[53,3]]),xa=p(x('<span class="text-xs text-gray-500 bg-gray-100 px-1 rounded">RTL</span>'),n[c],[[67,3]]),_a=p(x('<span class="text-lg"> </span>'),n[c],[[104,8]]),ha=p(x('<span class="text-xs text-gray-500 bg-gray-100 px-1 rounded ml-2">RTL</span>'),n[c],[[120,10]]),ya=p(x('<div class="text-xs text-gray-500 truncate"> </div>'),n[c],[[127,9]]),ba=p(x('<div class="text-xs text-gray-500 truncate"> </div>'),n[c],[[131,9]]),wa=p(Xe('<svg class="w-4 h-4 text-blue-600" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>'),n[c],[[138,8,[[139,9]]]]),ka=p(x('<li><button type="button"><!> <div class="flex-1 min-w-0"><div class="flex items-center justify-between"><span><!></span> <!></div> <!></div> <!></button></li>'),n[c],[[92,5,[[93,6,[[107,7,[[108,8,[[109,9]]]]]]]]]]),La=p(x('<div class="fixed inset-0 z-10"></div> <div class="absolute right-0 mt-1 w-48 bg-white border border-gray-200 rounded-md shadow-lg z-20"><ul class="py-1"></ul></div>',1),n[c],[[83,2],[86,2,[[87,3]]]]),Sa=p(x('<div><button type="button" aria-haspopup="listbox"><!> <span class="font-medium text-gray-900"><!></span> <!> <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></button> <!></div>'),n[c],[[38,0,[[40,1,[[56,2],[70,2,[[76,3]]]]]]]]);function n(C,w){be(new.target),Le(w,!1,n);const T=ee(),N=ee(),u=ee(),t=ee(),f=ee();let H=ue(w,"className",8,""),F=ue(w,"showFlags",8,!0),z=ue(w,"showNativeNames",8,!0),Y=ue(w,"compact",8,!1),j=ee(!1);function O(o){fa(o),E(j,!1)}function Z(){E(j,!e(j))}function J(){E(j,!1)}ie(()=>ye,()=>{E(T,Ee(ye))}),ie(()=>e(T),()=>{E(N,e(T)?.languages?.activeLanguages??["en"])}),ie(()=>e(N),()=>{E(u,Re.filter(o=>e(N).includes(o.code)))}),ie(()=>He,()=>{E(t,Ee(He))}),ie(()=>(e(u),e(t),Re),()=>{E(f,e(u).find(o=>L(o.code,e(t)))??Re.find(o=>L(o.code,e(t))))}),ta();var ae={...we()};ke();var q=Sa(),B=i(q),le=i(B);{var ce=o=>{var h=ga(),v=i(h,!0);s(h),y(()=>$(v,(e(f),k(()=>e(f)?.flag)))),r(o,h)};m(()=>b(le,o=>{F()&&o(ce)}),"if",n,52,2)}var G=g(le,2),Ne=i(G);{var fe=o=>{var h=X();y(()=>$(h,(e(f),k(()=>e(f)?.name)))),r(o,h)},Te=o=>{var h=ge(),v=W(h);{var _=A=>{var a=X();y(()=>$(a,(e(f),k(()=>e(f)?.nativeName)))),r(A,a)},K=A=>{var a=X();y(()=>$(a,(e(f),k(()=>e(f)?.name)))),r(A,a)};m(()=>b(v,A=>{z()?A(_):A(K,!1)},!0),"if",n,59,3)}r(o,h)};m(()=>b(Ne,o=>{L(e(t),"he")?o(fe):o(Te,!1)}),"if",n,57,3)}s(G);var te=g(G,2);{var de=o=>{var h=xa();r(o,h)};m(()=>b(te,o=>{e(f),e(t),k(()=>e(f)?.isRTL&&L(e(t),"he",!1))&&o(de)}),"if",n,66,2)}var Fe=g(te,2);s(B);var je=g(B,2);{var me=o=>{var h=La(),v=W(h),_=g(v,2),K=i(_);m(()=>ma(K,5,()=>e(u),pa,(A,a)=>{const D=ze(Oe(()=>(e(a),e(t),k(()=>L(e(a).code,e(t))))),"isSelected");e(D);const pe=ze(Oe(()=>(e(a),k(()=>e(a).isRTL))),"isRTL");e(pe);var re=ka(),M=i(re),U=i(M);{var Me=l=>{var d=_a(),P=i(d,!0);s(d),y(()=>$(P,(e(a),k(()=>e(a).flag)))),r(l,d)};m(()=>b(U,l=>{F()&&l(Me)}),"if",n,103,7)}var se=g(U,2),I=i(se),Q=i(I),Ke=i(Q);{var Ue=l=>{var d=X();y(()=>$(d,(e(a),k(()=>e(a).name)))),r(l,d)},Ie=l=>{var d=ge(),P=W(d);{var Ae=R=>{var V=X();y(()=>$(V,(e(a),k(()=>e(a).nativeName)))),r(R,V)},oe=R=>{var V=X();y(()=>$(V,(e(a),k(()=>e(a).name)))),r(R,V)};m(()=>b(P,R=>{z()?R(Ae):R(oe,!1)},!0),"if",n,112,10)}r(l,d)};m(()=>b(Ke,l=>{L(e(t),"he")?l(Ue):l(Ie,!1)}),"if",n,110,10)}s(Q);var Pe=g(Q,2);{var Ve=l=>{var d=ha();r(l,d)};m(()=>b(Pe,l=>{e(pe)&&L(e(t),"he",!1)&&l(Ve)}),"if",n,119,9)}s(I);var We=g(I,2);{var Ye=l=>{var d=ya(),P=i(d,!0);s(d),y(()=>$(P,(e(a),k(()=>e(a).name)))),r(l,d)},Ze=l=>{var d=ge(),P=W(d);{var Ae=oe=>{var R=ba(),V=i(R,!0);s(R),y(()=>$(V,(e(a),k(()=>e(a).nativeName)))),r(oe,R)};m(()=>b(P,oe=>{e(t),e(a),k(()=>L(e(t),"he")&&L(e(a).nativeName,e(a).name,!1))&&oe(Ae)},!0),"if",n,130,8)}r(l,d)};m(()=>b(We,l=>{ra(z()),e(a),e(t),k(()=>z()&&L(e(a).nativeName,e(a).name,!1)&&L(e(t),"he",!1))?l(Ye):l(Ze,!1)}),"if",n,126,8)}s(se);var Je=g(se,2);{var Qe=l=>{var d=wa();r(l,d)};m(()=>b(Je,l=>{e(D)&&l(Qe)}),"if",n,137,7)}s(M),s(re),y(()=>{ne(M,1,`
                        w-full flex items-center gap-3 px-4 py-2 text-left hover:bg-gray-50
                        transition-colors
                        ${e(D)?"bg-blue-50 text-blue-700":"text-gray-900"}
                        ${Y()?"text-sm":"text-base"}
                      `),ne(Q,1,`font-medium truncate ${e(D)?"text-blue-700":"text-gray-900"}`)}),xe("click",M,()=>O(e(a).code)),r(A,re)}),"each",n,88,4),s(K),s(_),xe("click",v,J),r(o,h)};m(()=>b(je,o=>{e(j)&&o(me)}),"if",n,81,1)}return s(q),y(()=>{ne(q,1,`relative ${H()}`),ne(B,1,`
          flex items-center gap-2 px-3 py-2 border border-gray-300 rounded-md shadow-sm
          bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500
          transition-colors text-gray-900
          ${Y()?"text-sm":"text-base"}
        `),Ce(B,"aria-expanded",e(j)),ne(Fe,0,`w-4 h-4 text-gray-400 transition-transform ${e(j)?"rotate-180":""}`)}),xe("click",B,Z),r(C,q),Se(ae)}S[c]="src/lib/components/Header.svelte";var $a=p(x('<img class="w-10 h-10 object-contain shrink-0"/>'),S[c],[[30,5]]),Na=p(x('<div class="w-10 h-10 bg-primary-600 rounded-lg flex items-center justify-center shrink-0"><svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"></path></svg></div>'),S[c],[[36,5,[[37,6,[[38,7],[44,7]]]]]]),Ta=p(x('<a href="/admin" class="hover:text-gray-900 font-medium text-primary-600">Admin</a>'),S[c],[[70,6]]),Fa=p(x('<a href="/owner" class="hover:text-gray-900 font-medium text-primary-600">My Gallery</a>'),S[c],[[72,6]]),ja=p(x('<!> <span class="text-gray-400">|</span> <span class="text-gray-500"> </span> <button class="hover:text-gray-900 text-gray-600" type="button">Logout</button>',1),S[c],[[74,5],[75,5],[76,5]]),Ma=p(x('<a href="/login" class="hover:text-gray-900">Sign In</a>'),S[c],[[84,5]]),Aa=p(x('<header class="bg-white shadow-sm border-b border-gray-200"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"><div class="flex justify-between items-center h-16"><div class="flex items-center space-x-3"><!> <div class="flex flex-col"><a href="/" class="text-xl font-bold text-gray-900 hover:text-primary-600 transition-colors"> </a> <span class="text-xs text-gray-500"> </span></div></div> <nav class="hidden md:flex items-center gap-4 text-sm text-gray-600"><a href="/" class="hover:text-gray-900">Home</a> <a href="/albums" class="hover:text-gray-900">Albums</a> <a href="/search" class="hover:text-gray-900">Search</a> <!> <div class="ml-6"><!></div></nav></div></div></header>'),S[c],[[24,0,[[25,1,[[26,2,[[28,3,[[54,4,[[55,5],[58,5]]]]],[63,3,[[64,4],[65,4],[66,4],[88,4]]]]]]]]]]);function S(C,w){be(new.target),Le(w,!1,S);const T=()=>(_e(z,"logo"),he(z,"$logo",t)),N=()=>(_e(F,"title"),he(F,"$title",t)),u=()=>(_e(De,"auth"),he(De,"$auth",t)),[t,f]=Ge(),H=new Date().getFullYear(),F=qe([ye,He],([v,_])=>v?.title?da.getTextValue(v.title,_):"OpenShutter"),z=qe(ye,v=>v?.logo??"");async function Y(){(await sa(la()))()}var j={...we()};ke();var O=Aa(),Z=i(O),J=i(Z),ae=i(J),q=i(ae);{var B=v=>{var _=$a();y(()=>{Ce(_,"src",T()),Ce(_,"alt",N())}),r(v,_)},le=v=>{var _=Na();r(v,_)};m(()=>b(q,v=>{T()?v(B):v(le,!1)}),"if",S,29,4)}var ce=g(q,2),G=i(ce),Ne=i(G,!0);s(G);var fe=g(G,2),Te=i(fe);s(fe),s(ce),s(ae);var te=g(ae,2),de=g(i(te),6);{var Fe=v=>{var _=ja(),K=W(_);{var A=M=>{var U=Ta();r(M,U)},a=M=>{var U=ge(),Me=W(U);{var se=I=>{var Q=Fa();r(I,Q)};m(()=>b(Me,I=>{L(u().user.role,"owner")&&I(se)},!0),"if",S,71,5)}r(M,U)};m(()=>b(K,M=>{L(u().user.role,"admin")?M(A):M(a,!1)}),"if",S,69,5)}var D=g(K,4),pe=i(D,!0);s(D);var re=g(D,2);y(()=>$(pe,u().user.name||u().user.email)),xe("click",re,Y),r(v,_)},je=v=>{var _=Ma();r(v,_)};m(()=>b(de,v=>{u().authenticated&&u().user?v(Fe):v(je,!1)}),"if",S,68,4)}var me=g(de,2),o=i(me);m(()=>n(o,{compact:!0}),"component",S,89,5,{componentTag:"LanguageSelector"}),s(me),s(te),s(J),s(Z),s(O),y(()=>{$(Ne,N()),$(Te,`SvelteKit migration preview · ${H??""}`)}),r(C,O);var h=Se(j);return f(),h}$e[c]="src/lib/components/Footer.svelte";var Ra=p(x('<footer class="bg-gray-800 text-white mt-8"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"><div class="text-center space-y-2"><p class="text-gray-300"> </p> <p class="text-gray-400 text-sm">SvelteKit migration preview — frontend is being migrated from Next.js to SvelteKit.</p></div></div></footer>'),$e[c],[[5,0,[[6,1,[[7,2,[[8,3],[11,3]]]]]]]]);function $e(C,w){be(new.target),Le(w,!1,$e);const T=new Date().getFullYear();var N={...we()};ke();var u=Ra(),t=i(u),f=i(t),H=i(f),F=i(H);return s(H),oa(2),s(f),s(t),s(u),y(()=>$(F,`© ${T??""} OpenShutter. All rights reserved.`)),r(C,u),Se(N)}ve[c]="src/routes/+layout.svelte";var Ca=p(x('<!> <main class="min-h-screen bg-background text-foreground"><!></main> <!>',1),ve[c],[[38,0]]);function ve(C,w){be(new.target),Le(w,!1,ve);const T=()=>(_e(Be,"page"),he(Be,"$page",N)),[N,u]=Ge();ia(()=>{L(T().url.pathname,"/login",!1)&&va.load().catch(O=>{console.warn(...na("warn","Failed to load site config:",O))}),ca(),L(typeof navigator,"undefined",!1)&&"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(O=>{for(const Z of O)Z.unregister().then(J=>{J&&console.log("Service worker unregistered")})})});var t={...we()};ke();var f=Ca(),H=W(f);m(()=>S(H,{}),"component",ve,36,0,{componentTag:"Header"});var F=g(H,2),z=i(F);ua(z,w,"default",{}),s(F);var Y=g(F,2);m(()=>$e(Y,{}),"component",ve,42,0,{componentTag:"Footer"}),r(C,f);var j=Se(t);return u(),j}export{ve as component};

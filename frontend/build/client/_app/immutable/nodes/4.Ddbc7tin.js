import{e as he,g as Oe,c as re,l as oe,b as ve,a as h,f as E,t as xe}from"../chunks/mVdtGE8-.js";import{i as He}from"../chunks/DfpQQ0Vj.js";import{u as N,O as _e,Z as be,al as je,bn as Me,a4 as ye,a5 as Fe,aa as Se,bf as Ie,ba as Ne,a2 as Re,af as W,d as we,F as u,bo as Ce,p as se,o as De,t as $e,q as k,m as H,l as U,k as e,g as Ue,h as X,j as w,v as A,w as ue,a as le,c as m,r as d,f as V,n as Te,y as q,e as Ve,$ as Pe}from"../chunks/CK0-DIe0.js";import{h as ze}from"../chunks/CBTfresD.js";import{p as pe}from"../chunks/ux2VXDBy.js";import{i as P}from"../chunks/BhPWbYAn.js";import{v as ee}from"../chunks/DTEFG1b5.js";import{a as te,s as ge}from"../chunks/BKTEqjJl.js";import{d as qe}from"../chunks/sJkrieu8.js";import{s as me}from"../chunks/74aT5YJ6.js";import{a as L}from"../chunks/Bv0kf0zg.js";import{e as Be,i as Ge}from"../chunks/jNwdByo0.js";import{h as Ye,a as Ze,s as K}from"../chunks/Bwj96XKz.js";import{l as Je,s as Ee}from"../chunks/BSTdbr_g.js";import{M as B,c as ae}from"../chunks/DD5UVB3K.js";function Ke(v,l,r){if(!l||l===Ye(String(r??"")))return;let o;const p=v.__svelte_meta?.loc;p?o=`near ${p.file}:${p.line}:${p.column}`:we?.[u]&&(o=`in ${we[u]}`),Ce(Ze(o))}function Ae(v,l,r=!1,o=!1,p=!1){var i=v,n="";N(()=>{var c=je;if(n===(n=l()??"")){_e&&be();return}if(c.nodes_start!==null&&(Me(c.nodes_start,c.nodes_end),c.nodes_start=c.nodes_end=null),n!==""){if(_e){for(var y=ye.data,s=be(),$=s;s!==null&&(s.nodeType!==Fe||s.data!=="");)$=s,s=Se(s);if(s===null)throw Ie(),Ne;p||Ke(s.parentNode,y,n),he(ye,$),i=Re(s);return}var x=n+"";r?x=`<svg>${x}</svg>`:o&&(x=`<math>${x}</math>`);var t=Oe(x);if((r||o)&&(t=W(t)),he(W(t),t.lastChild),r||o)for(;W(t);)i.before(W(t));else i.before(t)}})}const Qe=async({fetch:v})=>{try{const r=await v("http://localhost:5000/api/albums?parentId=root");if(!r.ok)return console.error("Failed to fetch root albums:",r.status,r.statusText),{rootAlbums:[],albumsError:"Failed to fetch albums"};const o=await r.json();return Array.isArray(o)?{rootAlbums:o,albumsError:null}:(console.error("Unexpected albums response format:",o),{rootAlbums:[],albumsError:"Failed to fetch albums"})}catch(l){return console.error("Error fetching root albums:",l),{rootAlbums:[],albumsError:"Failed to fetch albums"}}},wt=Object.freeze(Object.defineProperty({__proto__:null,load:Qe},Symbol.toStringTag,{value:"Module"})),ke=qe(me,v=>v?.template?.activeTemplate||"modern");R[u]="src/lib/components/HomeHero.svelte";var We=L(E('<section class="relative overflow-hidden bg-gradient-to-br from-primary-500 to-secondary-600 text-white"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 md:py-24"><h1 class="text-4xl sm:text-5xl md:text-6xl font-extrabold tracking-tight mb-4"> </h1> <p class="mt-3 text-lg sm:text-xl text-blue-100 max-w-xl"><!></p></div></section>'),R[u],[[63,2,[[64,4,[[65,6],[68,6]]]]]]),Xe=L(E('<div class="absolute inset-0"><img alt="Hero background" class="w-full h-full object-cover transition-all duration-1000 ease-in-out"/> <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-black/30 to-black/40"></div></div>'),R[u],[[76,6,[[78,8],[83,8]]]]),et=L(E('<section class="relative min-h-[60vh] flex items-center overflow-hidden bg-gray-900 text-white"><!> <div class="relative z-10 max-w-4xl mx-auto px-6 py-16"><h1 class="text-4xl sm:text-5xl md:text-6xl font-extrabold tracking-tight mb-4 drop-shadow-lg"> </h1> <p class="mt-3 text-lg sm:text-xl text-blue-100 max-w-xl drop-shadow"><!></p> <div class="mt-8 flex flex-wrap gap-4"><a href="/albums" class="inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm bg-white text-primary-600 hover:bg-blue-50">Browse Albums</a> <a href="/search" class="inline-flex items-center justify-center px-6 py-3 border border-white/40 text-base font-medium rounded-md text-white hover:bg-white/10">Search Photos</a></div></div></section>'),R[u],[[74,2,[[87,4,[[88,6],[92,6],[96,6,[[97,8],[103,8]]]]]]]]);function R(v,l){re(new.target),se(l,!1,R);const r=()=>(ee(me,"siteConfigData"),te(me,"$siteConfigData",p)),o=()=>(ee(ae,"currentLanguage"),te(ae,"$currentLanguage",p)),[p,i]=ge(),n=H(),c=H(),y=H(),s=H(),$=H(),x=H();let t=H([]),Y=H(!0),C=H(0);const O=8e3;De(async()=>{try{const _=(await $e(fetch("/api/photos/gallery-leading?limit=5")))();if(_.ok){const a=(await $e(_.json()))(),b=Array.isArray(a)?a:a.data||[];Array.isArray(b)&&k(t,b)}}catch(_){console.error(...Je("error","Failed to fetch gallery-leading photos:",_))}finally{k(Y,!1)}}),U(()=>r(),()=>{k(n,r())}),U(()=>o(),()=>{k(c,o())}),U(()=>(e(t),e(C)),()=>{e(t).length>1&&setInterval(()=>{k(C,(e(C)+1)%e(t).length)},O)}),U(()=>(e(t),e(C)),()=>{k(y,e(t)[e(C)])}),U(()=>e(y),()=>{k(s,e(y)?.storage?.url||e(y)?.storage?.thumbnailPath||e(y)?.url||null)}),U(()=>(e(n),e(c)),()=>{k($,e(n)?.title?B.getTextValue(e(n).title,e(c)):"OpenShutter Gallery")}),U(()=>(e(n),e(c)),()=>{k(x,e(n)?.description?B.getHTMLValue(e(n).description,e(c)):"A modern photo gallery platform for showcasing your memories with style.")}),Ue();var j={...oe()};He();var z=ve(),ie=X(z);{var ne=_=>{var a=We(),b=m(a),F=m(b),S=m(F,!0);d(F);var I=V(F,2),Z=m(I);Ae(Z,()=>e(x)),d(I),d(b),d(a),N(()=>K(S,e($))),h(_,a)},M=_=>{var a=et(),b=m(a);{var F=J=>{var g=Xe(),T=m(g);Te(2),d(g),N(()=>Ee(T,"src",e(s))),h(J,g)};w(()=>P(b,J=>{e(s)&&J(F)}),"if",R,75,4)}var S=V(b,2),I=m(S),Z=m(I,!0);d(I);var Q=V(I,2),ce=m(Q);Ae(ce,()=>e(x)),d(Q),Te(2),d(S),d(a),N(()=>K(Z,e($))),h(_,a)};w(()=>P(ie,_=>{e(Y),e(t),A(()=>e(Y)&&ue(e(t).length,0))?_(ne):_(M,!1)}),"if",R,61,0)}h(v,z);var D=le(j);return i(),D}f[u]="src/lib/templates/modern/Home.svelte";var tt=L(E('<div class="bg-red-50 text-red-700 px-4 py-3 rounded-md text-sm"> </div>'),f[u],[[26,3]]),at=L(E('<div class="bg-gray-50 text-gray-600 px-4 py-3 rounded-md text-sm">No albums available yet.</div>'),f[u],[[30,3]]),rt=L(E('<p class="mt-1 text-xs text-gray-500 line-clamp-2"> </p>'),f[u],[[52,8]]),ot=L(E('<a class="group rounded-lg border border-gray-200 overflow-hidden shadow-sm hover:shadow-md transition-shadow bg-white flex flex-col"><div class="aspect-[4/3] bg-gray-100 flex items-center justify-center text-gray-400 text-xs">Album cover</div> <div class="p-4 flex-1 flex flex-col"><h3 class="text-base font-semibold text-gray-900 group-hover:text-primary-600 truncate"><!></h3> <!></div></a>'),f[u],[[36,5,[[40,6],[43,6,[[44,7]]]]]]),st=L(E('<div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"></div>'),f[u],[[34,3]]),lt=L(E('<!> <section class="bg-white"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10"><div class="flex items-center justify-between mb-6"><div><h2 class="text-2xl font-semibold text-gray-900">Featured Albums</h2> <p class="mt-1 text-sm text-gray-500">Root-level public albums from your gallery.</p></div> <a href="/albums" class="text-sm font-medium text-primary-600 hover:text-primary-700">View all</a></div> <!></div></section>',1),f[u],[[13,0,[[14,1,[[15,2,[[16,3,[[17,4],[18,4]]],[20,3]]]]]]]]);function f(v,l){re(new.target),se(l,!1,f);const r=()=>(ee(ae,"currentLanguage"),te(ae,"$currentLanguage",o)),[o,p]=ge();let i=pe(l,"data",8);var n={...oe()};He();var c=lt(),y=X(c);w(()=>R(y,{}),"component",f,11,0,{componentTag:"HomeHero"});var s=V(y,2),$=m(s),x=V(m($),2);{var t=O=>{var j=tt(),z=m(j);d(j),N(()=>K(z,`Failed to load albums: ${q(i()),A(()=>i().albumsError)??""}`)),h(O,j)},Y=O=>{var j=ve(),z=X(j);{var ie=M=>{var D=at();h(M,D)},ne=M=>{var D=st();w(()=>Be(D,5,()=>(q(i()),A(()=>i().rootAlbums)),Ge,(_,a)=>{var b=ot(),F=V(m(b),2),S=m(F),I=m(S);{var Z=g=>{var T=xe();N(de=>K(T,de),[()=>(q(B),e(a),r(),A(()=>B.getTextValue(e(a).name,r())))]),h(g,T)},Q=g=>{var T=xe("Untitled album");h(g,T)};w(()=>P(I,g=>{e(a),A(()=>e(a).name)?g(Z):g(Q,!1)}),"if",f,45,8)}d(S);var ce=V(S,2);{var J=g=>{var T=rt(),de=m(T,!0);d(T),N(Le=>K(de,Le),[()=>(q(B),e(a),r(),A(()=>B.getTextValue(e(a).description,r())))]),h(g,T)};w(()=>P(ce,g=>{e(a),A(()=>e(a).description)&&g(J)}),"if",f,51,7)}d(F),d(b),N(()=>Ee(b,"href",(e(a),A(()=>`/albums/${e(a).alias??e(a)._id}`)))),h(_,b)}),"each",f,35,4),d(D),h(M,D)};w(()=>P(z,M=>{q(i()),A(()=>!i().rootAlbums||ue(i().rootAlbums.length,0))?M(ie):M(ne,!1)},!0),"if",f,29,2)}h(O,j)};w(()=>P(x,O=>{q(i()),A(()=>i().albumsError)?O(t):O(Y,!1)}),"if",f,25,2)}d($),d(s),h(v,c);var C=le(n);return p(),C}G[u]="src/lib/components/HomeTemplateSwitcher.svelte";function G(v,l){re(new.target),se(l,!1,G);const r=()=>(ee(ke,"activeTemplate"),te(ke,"$activeTemplate",o)),[o,p]=ge();let i=pe(l,"data",8);var n={...oe()},c=ve(),y=X(c);{var s=t=>{w(()=>f(t,{get data(){return i()}}),"component",G,10,1,{componentTag:"ModernHome"})},$=t=>{w(()=>f(t,{get data(){return i()}}),"component",G,13,1,{componentTag:"ModernHome"})};w(()=>P(y,t=>{ue(r(),"modern")?t(s):t($,!1)}),"if",G,9,0)}h(v,c);var x=le(n);return p(),x}fe[u]="src/routes/+page.svelte";function fe(v,l){re(new.target),se(l,!1,fe);let r=pe(l,"data",8);var o={...oe()};return ze("1uha8ag",p=>{Ve(()=>{Pe.title="OpenShutter"})}),w(()=>G(v,{get data(){return r()}}),"component",fe,12,0,{componentTag:"HomeTemplateSwitcher"}),le(o)}export{fe as component,wt as universal};

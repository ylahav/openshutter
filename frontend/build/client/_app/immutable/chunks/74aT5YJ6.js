import{d as s,w as u}from"./sJkrieu8.js";const c={config:null,loading:!0,error:null};function l(){const{subscribe:t,set:d,update:a}=u(c);return{subscribe:t,load:async()=>{a(o=>({...o,loading:!0,error:null}));try{const o=new AbortController,e=setTimeout(()=>o.abort(),5e3),r=await fetch("/api/site-config",{signal:o.signal});if(clearTimeout(e),!r.ok)throw new Error(`HTTP ${r.status}: ${r.statusText}`);const n=await r.json(),f=n.success?n.data:n;a(g=>({...g,config:f,loading:!1,error:null}))}catch(o){const e=o instanceof Error?o.message:"Failed to load site configuration";a(r=>({...r,loading:!1,error:e})),!e.includes("ECONNREFUSED")&&!e.includes("Failed to fetch")&&!e.includes("aborted")&&console.error("Error loading site config:",o)}},refetch:async()=>{await l().load()},reset:()=>d(c)}}const i=l(),b=s(i,t=>t.config);s(i,t=>t.loading);s(i,t=>t.error);export{i as a,b as s};
